/**
 * Play media on all devices!
 *
 * Example:
 *
 *   mediaFactory.resolve(myVideoObject).toHtml(function(err, html) {
 *     // do something with html
 *     document.write(html);
 *   });
 */(function(a){var b=function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},c=function(a){typeof this.initialize=="function"?this.initialize(a):c.prototype.initialize.call(this,a)};c.extend=function(a){var d=function(a){c.call(this,a)};return b(d.prototype,a),d},b(c.prototype,{initialize:function(a){},toHtml:function(a){typeof a=="function"&&a(null,"")}});var d=function(a){var b=a.split(".").pop();console.log(b);switch(b){case"webm":return"video/webm";case"ogv":return"video/ogg";case"mp4":return"video/mp4";default:return"video/mp4"}},e=c.extend({initialize:function(a){this.sources=a.sources,this.poster=a.poster||"",this.width=a.width||500,this.height=a.height||281},toHtml:function(a){var b="";this.poster?b+='<video width="'+this.width+'" height="'+this.height+'" poster="'+this.poster+'" controls>':b+='<video width="'+this.width+'" height="'+this.height+'" controls>';for(var c=0;c<this.sources.length;c++){var e=this.sources[c];b+='<source src="'+e+'"  type="'+d(e)+'" />'}b+="</video>",typeof a=="function"&&a(null,b)}}),f=c.extend({initialize:function(a){this.sources=a.sources,this.poster=a.poster||"",this.width=a.width||500,this.height=a.height||281},addPolyFill:function(){var a=document.getElementsByTagName("body")[0],b=document.createElement("link"),c=document.createElement("script");b.setAttribute("href","http://vjs.zencdn.net/c/video-js.css"),b.setAttribute("rel","stylesheet"),c.setAttribute("src","http://vjs.zencdn.net/c/video.js"),a.appendChild(b),a.appendChild(c)},toHtml:function(a){var b="";this.poster?b+='<video width="'+this.width+'" height="'+this.height+'" poster="'+this.poster+'" controls'+' class="video-js vjs-default-skin" data-setup="{}">':b+='<video width="'+this.width+'" height="'+this.height+'" controls class="video-js vjs-default-skin"'+' data-setup="{}">';for(var c=0;c<this.sources.length;c++){var e=this.sources[c];b+='<source src="'+e+'"  type="'+d(e)+'" />'}b+="</video>",typeof window!="undefined"&&typeof window.VideoJS=="undefined"&&this.addPolyFill(),typeof a=="function"&&a(null,b)}}),g=c.extend({initialize:function(a){this.url=a.url,this.width=a.width||500,this.height=a.height||281},toHtml:function(a){var b='<iframe src="'+this.url+'" width="'+this.width+'" height="'+this.height+'" frameborder="0"></iframe>';typeof a=="function"&&a(null,b)}}),h=c.extend({toHtml:function(a){typeof a=="function"&&a(new Error("Unknown media type."),"Unknown media type.")}}),i=function(){};b(i.prototype,{execute:function(a,b){return new h(b)}}),i.extend=function(a){var d=function(a){c.call(this,a)};return b(d.prototype,a),d};var j=c.extend({execute:function(a,c){var d;if(a["@type"]==="VideoObject")if(a.embedURL)b(c,{url:a.embedURL}),d=new g(c);else if(a.contentURL){var e=null;a.image&&(e=a.image.contentURL),b(c,{poster:e,sources:[a.contentURL]}),d=new f(c)}return d||new h}}),k=c.extend({execute:function(a,c){var d;if(a["@type"]==="VideoObject")if(a.embedURL)b(c,{url:a.embedURL}),d=new g(c);else if(a.contentURL){var f=null;a.image&&(f=a.image.contentURL),b(c,{poster:f,sources:[a.contentURL]}),d=new e(c)}return d}}),l=function(){this.strategies={def:new j,html5:new k}};b(l.prototype,{resolve:function(a,b){b=b||{};var c;if(typeof b.strategy!="undefined"&&typeof this.strategies[b.strategy]!="undefined"){var d=this.strategies[b.strategy];c=d.execute(a,b)}return c||this.strategies.def.execute(a,b)}}),a.mediaFactory=new l})(typeof module!="undefined"?module.exports:window);